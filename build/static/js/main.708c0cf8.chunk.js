(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{107:function(t,e,n){"use strict";n.r(e);var a={};n.r(a),n.d(a,"register",(function(){return q})),n.d(a,"logIn",(function(){return M}));var r={};n.r(r),n.d(r,"isLoggedIn",(function(){return R}));var c={};n.r(c),n.d(c,"getContacts",(function(){return W})),n.d(c,"getFilter",(function(){return Z})),n.d(c,"isLoading",(function(){return P}));var o={};n.r(o),n.d(o,"filterContacts",(function(){return U}));var s={};n.r(s),n.d(s,"fetchContacts",(function(){return E})),n.d(s,"addContact",(function(){return X})),n.d(s,"deleteContact",(function(){return Y}));var i=n(0),u=n.n(i),l=n(29),b=n.n(l),f=n(19),j=n(7),d=n(48),_=(n(63),n(64),n(17)),m=n(49),p=n.n(m),O=n(21),h=n.n(O),v=n(1);var x=function(){return Object(v.jsxs)("nav",{children:[Object(v.jsx)(f.b,{exact:!0,to:"/register",className:h.a.link,activeClassName:h.a.activeLink,children:"Registration"}),Object(v.jsx)(f.b,{to:"/login",className:h.a.link,activeClassName:h.a.activeLink,children:"Login"}),Object(v.jsx)(f.b,{to:"/contacts",className:h.a.link,activeClassName:h.a.activeLink,children:"Contacts"})]})},g=n(35),w=n.n(g);var C,N=function(){return Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{className:w.a.user,children:"Welcome, "}),Object(v.jsx)("button",{className:w.a.user__button,type:"button",children:"Logout"})]})},y=n(3),k=n(5),L=Object(k.e)({name:"auth",initialState:{user:{name:null,email:null,password:null},token:null,isLoggedIn:!1},extraReducers:(C={},Object(y.a)(C,a.register.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(y.a)(C,a.logIn.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),C)}).reducer,A=n(12),I=n.n(A),V=n(20),F=n(18),z=n.n(F);z.a.defaults.baseURL="https://connections-api.herokuapp.com";var q=Object(k.c)("auth/register",function(){var t=Object(V.a)(I.a.mark((function t(e,n){var a,r,c;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.rejectWithValue,t.prev=1,t.next=4,z.a.post("/users/signup",e);case 4:return r=t.sent,c=r.data,t.abrupt("return",c);case 9:return t.prev=9,t.t0=t.catch(1),t.abrupt("return",a(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}()),M=Object(k.c)("auth/login",function(){var t=Object(V.a)(I.a.mark((function t(e,n){var a,r,c;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.rejectWithValue,t.prev=1,t.next=4,z.a.post("/users/login",e);case 4:return r=t.sent,c=r.data,t.abrupt("return",c);case 9:return t.prev=9,t.t0=t.catch(1),t.abrupt("return",a(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}()),R=function(t){return t.auth.isLoggedIn};var S,B,D=function(){return Object(v.jsx)("header",{className:p.a.header,children:r.isLoggedIn?Object(v.jsx)(N,{}):Object(v.jsx)(x,{})})},J=n(14),T=n(24),W=function(t){return t.contacts.items},Z=function(t){return t.contacts.filter},P=function(t){return t.contacts.loading},U=Object(k.b)("contacts/filter"),E=Object(k.c)("contacts/fetch",function(){var t=Object(V.a)(I.a.mark((function t(e,n){var a,r,c;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.rejectWithValue,t.prev=1,t.next=4,z.a.get("/contacts");case 4:return r=t.sent,c=r.data,t.abrupt("return",c);case 9:return t.prev=9,t.t0=t.catch(1),t.abrupt("return",a(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}()),X=Object(k.c)("contacts/add",function(){var t=Object(V.a)(I.a.mark((function t(e,n){var a,r,c,o,s,i;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.name,r=e.phone,c=n.rejectWithValue,t.prev=2,o={name:a,phone:r},t.next=6,z.a.post("/contacts",o);case 6:return s=t.sent,i=s.data,t.abrupt("return",i);case 11:return t.prev=11,t.t0=t.catch(2),t.abrupt("return",c(t.t0));case 14:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e,n){return t.apply(this,arguments)}}()),Y=Object(k.c)("contacts/delete",function(){var t=Object(V.a)(I.a.mark((function t(e,n){var a;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.rejectWithValue,t.prev=1,t.next=4,z.a.delete("/contacts/".concat(e));case 4:return t.abrupt("return",e);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",a(t.t0));case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n){return t.apply(this,arguments)}}()),$=n(54),G=n(6),H=Object(k.d)([],(S={},Object(y.a)(S,E.fulfilled,(function(t,e){return e.payload})),Object(y.a)(S,X.fulfilled,(function(t,e){var n=e.payload;return t.find((function(t){return t.name===n.name}))?void alert("".concat(n.name," is already in contacts")):[n].concat(Object($.a)(t))})),Object(y.a)(S,Y.fulfilled,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),S)),K=Object(k.d)("",Object(y.a)({},U,(function(t,e){return e.payload}))),Q=Object(k.d)(!1,(B={},Object(y.a)(B,E.pending,(function(){return!0})),Object(y.a)(B,E.fulfilled,(function(){return!1})),Object(y.a)(B,E.rejected,(function(){return!1})),Object(y.a)(B,X.pending,(function(){return!0})),Object(y.a)(B,X.fulfilled,(function(){return!1})),Object(y.a)(B,X.rejected,(function(){return!1})),Object(y.a)(B,Y.pending,(function(){return!0})),Object(y.a)(B,Y.fulfilled,(function(){return!1})),Object(y.a)(B,Y.rejected,(function(){return!1})),B)),tt=Object(G.b)({items:H,filter:K,loading:Q}),et=n(22),nt=n.n(et),at={name:"",phone:""};var rt=function(){var t=Object(i.useState)(at),e=Object(T.a)(t,2),n=e[0],a=e[1],r=Object(j.b)(),c=function(t){var e=t.target,r=e.name,c=e.value;a(Object(J.a)(Object(J.a)({},n),{},Object(y.a)({},r,c)))},o=function(){a(at)};return Object(v.jsxs)("form",{onSubmit:function(t){t.preventDefault(),r(s.addContact(n)),o()},className:nt.a.form,children:[Object(v.jsxs)("label",{className:nt.a.form__label,children:["Name",Object(v.jsx)("input",{type:"text",className:nt.a.form__input,name:"name",value:n.name,pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"\u0418\u043c\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0431\u0443\u043a\u0432, \u0430\u043f\u043e\u0441\u0442\u0440\u043e\u0444\u0430, \u0442\u0438\u0440\u0435 \u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan \u0438 \u0442. \u043f.",required:!0,onChange:c})]}),Object(v.jsxs)("label",{className:nt.a.form__label,children:["Phone",Object(v.jsx)("input",{type:"tel",className:nt.a.form__input,name:"phone",value:n.phone,pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0446\u0438\u0444\u0440 \u0438 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043f\u0440\u043e\u0431\u0435\u043b\u044b, \u0442\u0438\u0440\u0435, \u043a\u0440\u0443\u0433\u043b\u044b\u0435 \u0441\u043a\u043e\u0431\u043a\u0438 \u0438 \u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 +",required:!0,onChange:c})]}),Object(v.jsx)("button",{type:"submit",className:nt.a.form__button,children:"Add contact"})]})},ct=n(31),ot=n.n(ct),st=(n(86),n(51)),it=n.n(st);var ut=function(){return Object(v.jsx)(it.a,{type:"ThreeDots",color:"#1b7bc9",height:80,width:80})};var lt=function(){var t=Object(j.c)(c.isLoading),e=Object(j.c)((function(t){var e=t.contacts;return function(t,e){var n=e.toLowerCase();return t.filter((function(t){return t.name.toLowerCase().includes(n)}))}(e.items,e.filter)})),n=Object(j.b)();return Object(i.useEffect)((function(){n(s.fetchContacts())}),[n]),Object(v.jsxs)(v.Fragment,{children:[t&&Object(v.jsx)(ut,{}),Object(v.jsx)("ul",{className:ot.a.contacts,children:e.length>1&&e.map((function(t){var e=t.id,a=t.name,r=t.phone;return Object(v.jsxs)("li",{className:ot.a.contacts__item,children:[a,": ",r,Object(v.jsx)("button",{type:"button",className:ot.a.contacts__button,onClick:function(){return function(t){return n(s.deleteContact(t))}(e)},children:"Delete"})]},e)}))})]})},bt=n(36),ft=n.n(bt);var jt=function(){var t=Object(j.c)(c.getFilter),e=Object(j.b)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("p",{className:ft.a.filter,children:"Find contacts by name"}),Object(v.jsx)("input",{type:"text",className:ft.a.filter__input,value:t,pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"\u0418\u043c\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0431\u0443\u043a\u0432, \u0430\u043f\u043e\u0441\u0442\u0440\u043e\u0444\u0430, \u0442\u0438\u0440\u0435 \u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan \u0438 \u0442. \u043f.",onChange:function(t){return e(o.filterContacts(t.target.value))}})]})};var dt=function(){return Object(v.jsxs)("div",{children:[Object(v.jsx)("h1",{children:"Phonebook"}),Object(v.jsx)(rt,{}),Object(v.jsx)("h2",{children:"Contacts"}),Object(v.jsx)(jt,{}),Object(v.jsx)(lt,{})]})},_t=n(15),mt=n.n(_t),pt={name:"",email:"",password:""};var Ot=function(){var t=Object(i.useState)(pt),e=Object(T.a)(t,2),n=e[0],r=e[1],c=Object(j.b)(),o=function(t){var e=t.target,a=e.name,c=e.value;r(Object(J.a)(Object(J.a)({},n),{},Object(y.a)({},a,c)))},s=function(){r(pt)};return Object(v.jsxs)("form",{className:mt.a.form,autoComplete:"off",onSubmit:function(t){t.preventDefault(),c(a.register(n)),s()},children:[Object(v.jsxs)("label",{className:mt.a.form__label,children:["Name",Object(v.jsx)("input",{className:mt.a.form__input,type:"text",name:"name",value:n.name,required:!0,onChange:o})]}),Object(v.jsxs)("label",{className:mt.a.form__label,children:["Email",Object(v.jsx)("input",{className:mt.a.form__input,type:"email",name:"email",value:n.email,required:!0,onChange:o})]}),Object(v.jsxs)("label",{className:mt.a.form__label,children:["Password",Object(v.jsx)("input",{className:mt.a.form__input,type:"password",name:"password",value:n.password,required:!0,onChange:o})]}),Object(v.jsx)("button",{className:mt.a.form__button,type:"submit",children:"Register"})]})},ht=n(23),vt=n.n(ht),xt={email:"",password:""};var gt=function(){var t=Object(i.useState)(xt),e=Object(T.a)(t,2),n=e[0],r=e[1],c=Object(j.b)(),o=function(t){var e=t.target,a=e.name,c=e.value;r(Object(J.a)(Object(J.a)({},n),{},Object(y.a)({},a,c)))},s=function(){r(xt)};return Object(v.jsxs)("form",{className:vt.a.form,autoComplete:"off",onSubmit:function(t){t.preventDefault(),c(a.logIn(n)),s()},children:[Object(v.jsxs)("label",{className:vt.a.form__label,children:["Email",Object(v.jsx)("input",{className:vt.a.form__input,type:"email",name:"email",value:n.email,required:!0,onChange:o})]}),Object(v.jsxs)("label",{className:vt.a.form__label,children:["Password",Object(v.jsx)("input",{className:vt.a.form__input,type:"password",name:"password",value:n.password,required:!0,onChange:o})]}),Object(v.jsx)("button",{className:vt.a.form__button,type:"submit",children:"LogIn"})]})};var wt=function(){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(D,{}),Object(v.jsxs)(_.c,{children:[Object(v.jsx)(_.a,{path:"/register",children:Object(v.jsx)(Ot,{})}),Object(v.jsx)(_.a,{path:"/login",children:Object(v.jsx)(gt,{})}),Object(v.jsx)(_.a,{path:"/contacts",children:Object(v.jsx)(dt,{})})]})]})},Ct=n(52),Nt=n.n(Ct),yt=n(16),kt=n(53),Lt={key:"token",storage:n.n(kt).a,whitelist:["token"]},At=Object(k.a)({reducer:{auth:Object(yt.g)(Lt,L),contacts:tt},middleware:function(t){return t({serializableCheck:{ignoredActions:[yt.a,yt.f,yt.b,yt.c,yt.d,yt.e]}}).concat(Nt.a)},devTools:!1}),It=Object(yt.h)(At);b.a.render(Object(v.jsx)(u.a.StrictMode,{children:Object(v.jsx)(j.a,{store:At,children:Object(v.jsx)(d.a,{loading:Object(v.jsx)(ut,{}),persistor:It,children:Object(v.jsx)(f.a,{children:Object(v.jsx)(wt,{})})})})}),document.getElementById("root"))},15:function(t,e,n){t.exports={form:"RegisterView_form__19Njf",form__input:"RegisterView_form__input__3OQoq",form__label:"RegisterView_form__label__3wTAO",form__button:"RegisterView_form__button__3Pu4r"}},21:function(t,e,n){t.exports={link:"AuthNav_link__2YX5M",activeLink:"AuthNav_activeLink__3HCIc"}},22:function(t,e,n){t.exports={form:"ContactForm_form__3YIws",form__input:"ContactForm_form__input__19paF",form__label:"ContactForm_form__label__-u65x",form__button:"ContactForm_form__button__2UTTz"}},23:function(t,e,n){t.exports={form:"LoginView_form__fLz6y",form__input:"LoginView_form__input__27JBe",form__label:"LoginView_form__label__39Un9",form__button:"LoginView_form__button__1Nrq-"}},31:function(t,e,n){t.exports={contacts:"ContactList_contacts__1-BVs",contacts__item:"ContactList_contacts__item__DMaps",contacts__button:"ContactList_contacts__button__3rMqi"}},35:function(t,e,n){t.exports={user:"UserMenu_user__2y4xX",user__button:"UserMenu_user__button__28T_C"}},36:function(t,e,n){t.exports={filter:"Filter_filter__1KN6o",filter__input:"Filter_filter__input__2IG7J"}},49:function(t,e,n){t.exports={header:"AppBar_header__3-wai"}},63:function(t,e,n){},64:function(t,e,n){}},[[107,1,2]]]);
//# sourceMappingURL=main.708c0cf8.chunk.js.map