(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[3],{106:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),a=n(27),u=n.n(a),i=n(16),o=n(6),s=n(47),l=(n(62),n(63),n(19)),d=n(48),f=n.n(d),b=n(23),j=n.n(b),h=n(7),p=n(1);var O=function(){var t=Object(o.c)(h.c.isLoggedIn);return Object(p.jsxs)("nav",{children:[Object(p.jsx)(i.b,{exact:!0,to:"/",className:j.a.link,activeClassName:j.a.activeLink,children:"General"}),t&&Object(p.jsx)(i.b,{to:"/contacts",className:j.a.link,activeClassName:j.a.activeLink,children:"Contacts"})]})},v=n(24),g=n.n(v);var x=function(){return Object(p.jsxs)("nav",{children:[Object(p.jsx)(i.b,{exact:!0,to:"/register",className:g.a.link,activeClassName:g.a.activeLink,children:"Registration"}),Object(p.jsx)(i.b,{to:"/login",className:g.a.link,activeClassName:g.a.activeLink,children:"Login"})]})},k=n(33),m=n.n(k);var _=function(){var t=Object(o.b)(),e=Object(o.c)(h.c.getUserName);return Object(p.jsxs)("div",{children:[Object(p.jsxs)("span",{className:m.a.user,children:["Welcome, ",e," "]}),Object(p.jsx)("button",{className:m.a.user__button,type:"button",onClick:function(){t(h.a.logOut())},children:"Logout"})]})};var y=function(){var t=Object(o.c)(h.c.isLoggedIn);return Object(p.jsxs)("header",{className:f.a.header,children:[Object(p.jsx)(O,{}),t?Object(p.jsx)(_,{}):Object(p.jsx)(x,{})]})},L=n(31),w=n(20),N=n(28),C=["children","redirectTo","restricted"];var I=function(t){var e=t.children,n=t.redirectTo,r=void 0===n?"/":n,c=t.restricted,a=void 0!==c&&c,u=Object(N.a)(t,C),i=Object(o.c)(h.c.isLoggedIn)&&a;return Object(p.jsx)(l.b,Object(w.a)(Object(w.a)({},u),{},{children:i?Object(p.jsx)(l.a,{to:r}):e}))},R=["children","redirectTo"];var T=function(t){var e=t.children,n=t.redirectTo,r=void 0===n?"/":n,c=Object(N.a)(t,R),a=Object(o.c)(h.c.isLoggedIn);return Object(p.jsx)(l.b,Object(w.a)(Object(w.a)({},c),{},{children:a?e:Object(p.jsx)(l.a,{to:r})}))},W=Object(r.lazy)((function(){return n.e(1).then(n.bind(null,114))})),z=Object(r.lazy)((function(){return n.e(4).then(n.bind(null,115))})),U=Object(r.lazy)((function(){return n.e(2).then(n.bind(null,116))})),V=Object(r.lazy)((function(){return n.e(0).then(n.bind(null,117))}));var A=function(){var t=Object(o.b)(),e=Object(o.c)(h.c.isRefreshing);return Object(r.useEffect)((function(){t(h.a.fetchCurrentUser())}),[t]),Object(p.jsx)(p.Fragment,{children:e?Object(p.jsx)(L.a,{}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(y,{}),Object(p.jsx)(l.d,{children:Object(p.jsxs)(r.Suspense,{fallback:Object(p.jsx)(L.a,{}),children:[Object(p.jsx)(I,{path:"/",exact:!0,children:Object(p.jsx)(W,{})}),Object(p.jsx)(I,{path:"/register",restricted:!0,children:Object(p.jsx)(z,{})}),Object(p.jsx)(I,{path:"/login",redirectTo:"/contacts",restricted:!0,children:Object(p.jsx)(U,{})}),Object(p.jsx)(T,{path:"/contacts",redirectTo:"/login",children:Object(p.jsx)(V,{})})]})})]})})},S=n(5),M=n(51),B=n.n(M),F=n(18),E=n(52),J=n.n(E),X=n(35),D={key:"token",storage:J.a,whitelist:["token"]},G=Object(S.a)({reducer:{auth:Object(F.g)(D,h.b),contacts:X.c},middleware:function(t){return t({serializableCheck:{ignoredActions:[F.a,F.f,F.b,F.c,F.d,F.e]}}).concat(B.a)},devTools:!1}),H=Object(F.h)(G);u.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(o.a,{store:G,children:Object(p.jsx)(s.a,{loading:null,persistor:H,children:Object(p.jsx)(i.a,{children:Object(p.jsx)(A,{})})})})}),document.getElementById("root"))},23:function(t,e,n){t.exports={link:"Navigation_link__pbxkr",activeLink:"Navigation_activeLink__1sn4l"}},24:function(t,e,n){t.exports={link:"AuthNav_link__2YX5M",activeLink:"AuthNav_activeLink__3HCIc"}},31:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));n(85);var r=n(50),c=n.n(r),a=n(1);var u=function(){return Object(a.jsx)(c.a,{type:"ThreeDots",color:"rgb(16, 165, 23)",height:80,width:80})}},33:function(t,e,n){t.exports={user:"UserMenu_user__2y4xX",user__button:"UserMenu_user__button__28T_C"}},35:function(t,e,n){"use strict";n.d(e,"d",(function(){return r})),n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return N}));var r={};n.r(r),n.d(r,"getContacts",(function(){return o})),n.d(r,"getFilter",(function(){return s})),n.d(r,"isLoading",(function(){return l}));var c={};n.r(c),n.d(c,"filterContacts",(function(){return f}));var a={};n.r(a),n.d(a,"fetchContacts",(function(){return v})),n.d(a,"addContact",(function(){return g})),n.d(a,"deleteContact",(function(){return x}));var u,i,o=function(t){return t.contacts.items},s=function(t){return t.contacts.filter},l=function(t){return t.contacts.loading},d=n(5),f=Object(d.b)("contacts/filter"),b=n(9),j=n.n(b),h=n(17),p=n(14),O=n.n(p),v=Object(d.c)("contacts/fetch",function(){var t=Object(h.a)(j.a.mark((function t(e,n){var r,c,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,O.a.get("/contacts");case 4:return c=t.sent,a=c.data,t.abrupt("return",a);case 9:return t.prev=9,t.t0=t.catch(1),t.abrupt("return",r(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}()),g=Object(d.c)("contacts/add",function(){var t=Object(h.a)(j.a.mark((function t(e,n){var r,c,a,u,i,o,s,l;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.name,c=e.number,a=n.getState,u=n.rejectWithValue,t.prev=2,i={name:r,number:c},o=a(),!o.contacts.items.find((function(t){return t.name===r}))){t.next=9;break}return alert("".concat(r," is already in contacts")),t.abrupt("return",u());case 9:return t.next=11,O.a.post("/contacts",i);case 11:return s=t.sent,l=s.data,t.abrupt("return",l);case 16:return t.prev=16,t.t0=t.catch(2),t.abrupt("return",u(t.t0));case 19:case"end":return t.stop()}}),t,null,[[2,16]])})));return function(e,n){return t.apply(this,arguments)}}()),x=Object(d.c)("contacts/delete",function(){var t=Object(h.a)(j.a.mark((function t(e,n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,O.a.delete("/contacts/".concat(e));case 4:return t.abrupt("return",e);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",r(t.t0));case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n){return t.apply(this,arguments)}}()),k=n(4),m=n(53),_=n(8),y=Object(d.d)([],(u={},Object(k.a)(u,v.fulfilled,(function(t,e){return e.payload})),Object(k.a)(u,g.fulfilled,(function(t,e){return[e.payload].concat(Object(m.a)(t))})),Object(k.a)(u,x.fulfilled,(function(t,e){return t.filter((function(t){return t.id!==e.payload}))})),u)),L=Object(d.d)("",Object(k.a)({},f,(function(t,e){return e.payload}))),w=Object(d.d)(!1,(i={},Object(k.a)(i,v.pending,(function(){return!0})),Object(k.a)(i,v.fulfilled,(function(){return!1})),Object(k.a)(i,v.rejected,(function(){return!1})),Object(k.a)(i,g.pending,(function(){return!0})),Object(k.a)(i,g.fulfilled,(function(){return!1})),Object(k.a)(i,g.rejected,(function(){return!1})),Object(k.a)(i,x.pending,(function(){return!0})),Object(k.a)(i,x.fulfilled,(function(){return!1})),Object(k.a)(i,x.rejected,(function(){return!1})),i)),N=Object(_.b)({items:y,filter:L,loading:w})},48:function(t,e,n){t.exports={header:"AppBar_header__3-wai"}},62:function(t,e,n){},63:function(t,e,n){},7:function(t,e,n){"use strict";n.d(e,"b",(function(){return g})),n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return c}));var r={};n.r(r),n.d(r,"register",(function(){return h})),n.d(r,"logIn",(function(){return p})),n.d(r,"logOut",(function(){return O})),n.d(r,"fetchCurrentUser",(function(){return v}));var c={};n.r(c),n.d(c,"isLoggedIn",(function(){return x})),n.d(c,"getUserName",(function(){return k})),n.d(c,"isRefreshing",(function(){return m}));var a=n(4),u=n(5),i=n(9),o=n.n(i),s=n(17),l=n(14),d=n.n(l);d.a.defaults.baseURL="https://connections-api.herokuapp.com";var f,b=function(t){d.a.defaults.headers.common.Authorization="Bearer ".concat(t)},j=function(){d.a.defaults.headers.common.Authorization=""},h=Object(u.c)("auth/register",function(){var t=Object(s.a)(o.a.mark((function t(e,n){var r,c,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,d.a.post("/users/signup",e);case 4:return c=t.sent,a=c.data,b(a.token),t.abrupt("return",a);case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",r(t.t0));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}()),p=Object(u.c)("auth/login",function(){var t=Object(s.a)(o.a.mark((function t(e,n){var r,c,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,d.a.post("/users/login",e);case 4:return c=t.sent,a=c.data,b(a.token),t.abrupt("return",a);case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",r(t.t0));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}()),O=Object(u.c)("auth/logout",function(){var t=Object(s.a)(o.a.mark((function t(e,n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,d.a.post("/users/logout");case 4:j(),t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",r(t.t0));case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n){return t.apply(this,arguments)}}()),v=Object(u.c)("auth/refresh",function(){var t=Object(s.a)(o.a.mark((function t(e,n){var r,c,a,u,i,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.getState,c=n.rejectWithValue,a=r(),null!==(u=a.auth.token)){t.next=5;break}return t.abrupt("return",c());case 5:return b(u),t.prev=6,t.next=9,d.a.get("/users/current");case 9:return i=t.sent,s=i.data,t.abrupt("return",s);case 14:return t.prev=14,t.t0=t.catch(6),t.abrupt("return",c(t.t0));case 17:case"end":return t.stop()}}),t,null,[[6,14]])})));return function(e,n){return t.apply(this,arguments)}}()),g=Object(u.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isRefreshing:!1},extraReducers:(f={},Object(a.a)(f,h.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(a.a)(f,p.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(a.a)(f,O.fulfilled,(function(t,e){t.user={name:null,email:null},t.token=null,t.isLoggedIn=!1})),Object(a.a)(f,v.pending,(function(t,e){t.isRefreshing=!0})),Object(a.a)(f,v.fulfilled,(function(t,e){t.user=e.payload,t.isLoggedIn=!0,t.isRefreshing=!1})),Object(a.a)(f,v.rejected,(function(t,e){t.isRefreshing=!1})),f)}).reducer,x=function(t){return t.auth.isLoggedIn},k=function(t){return t.auth.user.name},m=function(t){return t.auth.isRefreshing}}},[[106,5,6]]]);
//# sourceMappingURL=main.3033239f.chunk.js.map